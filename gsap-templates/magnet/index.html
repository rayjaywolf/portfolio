<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/mouse-follower@1/dist/mouse-follower.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting.css" />
  <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting-cells.css" />
  <link rel="stylesheet" href="style.css" />
  <title>Document</title>
  <style></style>
</head>

<body>
  <section>
    <a href="">
      <div class="ani">
        <div class="text2" data-splitting="chars">Hover</div>
        <div class="downText" data-splitting="chars">Hover</div>
      </div>
    </a>
  </section>
  <div class="container">
    <div class="btn">
      <span class="text" data-text="Hello">Hello</span>
      <span class="bg">
        <span></span>
      </span>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://unpkg.com/mouse-follower@1/dist/mouse-follower.min.js"></script>
  <script src="https://unpkg.com/splitting/dist/splitting.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <script>
    const btn = document.querySelector(".btn");
    const text = btn.querySelector(".text");
    const text2 = document.querySelector(".text2");
    const downText = document.querySelector(".downText");
    const ani = document.querySelector(".ani");

    // Splitting({ target: text2, by: "chars" });
    // Splitting({ target: downText, by: "chars" });
    Splitting({});

    const tl = gsap.timeline({ paused: true });

    tl.to(".text2 .char", {
      duration: 0.25,
      // transform: "translateY(-100%)",
      transform: "rotateX(90deg)",
      transformOrigin: "50% 0%",
      stagger: 0.03,
      ease: "sine.inout",
    });
    tl.to(
      ".downText span",
      {
        duration: 0.20,
        // top: "0%",
        stagger: 0.03,
        // transform: "translateY(-95%)",
        transform: "rotateX(0deg)",
        // transformOrigin: "50% 100%",
        ease: "sine.inout",
      },
      "-=0.25"
    );

    ani.addEventListener("mouseenter", () => {
      tl.play();
    });
    ani.addEventListener("mouseleave", () => {
      // tl.progress(0);
      tl.reverse();
    });

    function addMagneticEffect(element) {
      var options = {
        y: 0.2,
        x: 0.2,
        s: 0.2,
        rs: 0.2,
      };

      var el = $(element);
      var y = 0;
      var x = 0;
      var width = 0;
      var height = 0;

      el.on("mouseenter", function (e) {
        var rect = element.getBoundingClientRect();
        y = rect.top - window.pageYOffset;
        x = rect.left - window.pageXOffset;
        width = rect.width;
        height = rect.height;
      });

      el.on("mousemove", function (e) {
        var rect = element.getBoundingClientRect();
        var mouseY = e.clientY - (rect.top - window.pageYOffset) - height / 2;
        var mouseX = e.clientX - (rect.left - window.pageXOffset) - width / 2;
        var newY = mouseY * options.y;
        var newX = mouseX * options.x;

        move(newX, newY, options.s);
      });

      el.on("mouseleave", function () {
        move(0, 0, options.rs);
      });

      function move(x, y, speed) {
        gsap.to(el, {
          y: y,
          x: x,
          force3D: true,
          overwrite: true,
          duration: speed,
        });
      }
    }
  </script>
</body>

</html>